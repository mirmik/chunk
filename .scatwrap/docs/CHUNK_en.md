<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>docs/CHUNK_en.md</title>
</head>
<body>
<!-- BEGIN SCAT CODE -->
#&nbsp;CHUNK&nbsp;Patch&nbsp;Format<br>
<br>
The&nbsp;CHUNK&nbsp;format&nbsp;is&nbsp;designed&nbsp;to:<br>
<br>
*&nbsp;be&nbsp;simple&nbsp;enough&nbsp;for&nbsp;a&nbsp;human&nbsp;to&nbsp;read&nbsp;and&nbsp;for&nbsp;a&nbsp;neural&nbsp;network&nbsp;to&nbsp;generate;<br>
*&nbsp;and&nbsp;strict&nbsp;enough&nbsp;to&nbsp;safely&nbsp;modify&nbsp;source&nbsp;code.<br>
<br>
In&nbsp;this&nbsp;document&nbsp;we&nbsp;describe&nbsp;the&nbsp;**file&nbsp;format&nbsp;and&nbsp;the&nbsp;command&nbsp;semantics**.<br>
CHUNK&nbsp;uses&nbsp;a&nbsp;lightweight&nbsp;YAML&nbsp;(Yet&nbsp;Another&nbsp;Markup&nbsp;Language)&nbsp;syntax&nbsp;because&nbsp;neural&nbsp;networks&nbsp;tend&nbsp;to&nbsp;generate&nbsp;YAML&nbsp;documents&nbsp;fairly&nbsp;reliably&nbsp;(unlike&nbsp;unified&nbsp;diffs).<br>
<br>
---<br>
<br>
##&nbsp;Comments&nbsp;and&nbsp;the&nbsp;`#`&nbsp;Character<br>
<br>
The&nbsp;YAML&nbsp;dialect&nbsp;used&nbsp;by&nbsp;CHUNK&nbsp;**does&nbsp;not&nbsp;support&nbsp;YAML&nbsp;comments**.<br>
<br>
This&nbsp;is&nbsp;because&nbsp;`#`&nbsp;may&nbsp;appear&nbsp;in&nbsp;Python&nbsp;code,&nbsp;in&nbsp;C++&nbsp;(C&nbsp;plus&nbsp;plus)&nbsp;code,&nbsp;and&nbsp;explaining&nbsp;to&nbsp;a&nbsp;silicon&nbsp;brain&nbsp;that&nbsp;the&nbsp;character&nbsp;must&nbsp;be&nbsp;escaped&nbsp;is&nbsp;more&nbsp;trouble&nbsp;than&nbsp;it&nbsp;is&nbsp;worth.<br>
<br>
Therefore&nbsp;the&nbsp;`#`&nbsp;character&nbsp;never&nbsp;has&nbsp;any&nbsp;special&nbsp;meaning&nbsp;and&nbsp;is&nbsp;always&nbsp;treated&nbsp;as&nbsp;part&nbsp;of&nbsp;the&nbsp;line.<br>
<br>
To&nbsp;provide&nbsp;explanations&nbsp;for&nbsp;a&nbsp;patch&nbsp;as&nbsp;a&nbsp;whole,&nbsp;use&nbsp;the&nbsp;top-level&nbsp;`description`&nbsp;field,&nbsp;and&nbsp;use&nbsp;the&nbsp;`comment`&nbsp;field&nbsp;for&nbsp;per-operation&nbsp;notes.<br>
<br>
---<br>
<br>
##&nbsp;1.&nbsp;File&nbsp;Structure<br>
<br>
The&nbsp;root&nbsp;of&nbsp;a&nbsp;YAML&nbsp;document&nbsp;is&nbsp;an&nbsp;**object**&nbsp;(a&nbsp;mapping)&nbsp;with&nbsp;a&nbsp;required&nbsp;`operations`&nbsp;field:<br>
<br>
```yaml<br>
operations:<br>
&nbsp;&nbsp;-&nbsp;path:&nbsp;src/foo.cpp<br>
&nbsp;&nbsp;&nbsp;&nbsp;op:&nbsp;replace_text<br>
&nbsp;&nbsp;&nbsp;&nbsp;...<br>
&nbsp;&nbsp;-&nbsp;path:&nbsp;src/foo.py<br>
&nbsp;&nbsp;&nbsp;&nbsp;op:&nbsp;replace_py_method<br>
&nbsp;&nbsp;&nbsp;&nbsp;...<br>
```<br>
<br>
Additionally,&nbsp;it&nbsp;is&nbsp;optional&nbsp;but&nbsp;highly&nbsp;recommended&nbsp;to&nbsp;add&nbsp;a&nbsp;`description`&nbsp;and&nbsp;the&nbsp;programming&nbsp;`language`&nbsp;(supported&nbsp;values:&nbsp;`python`&nbsp;and&nbsp;`c++`):<br>
<br>
```yaml<br>
description:&nbsp;&quot;Short&nbsp;description&nbsp;of&nbsp;the&nbsp;patch&quot;<br>
language:&nbsp;c++<br>
operations:<br>
&nbsp;&nbsp;-&nbsp;path:&nbsp;...<br>
&nbsp;&nbsp;&nbsp;&nbsp;op:&nbsp;...<br>
&nbsp;&nbsp;&nbsp;&nbsp;...<br>
```<br>
<br>
*&nbsp;`operations`&nbsp;—&nbsp;an&nbsp;array&nbsp;(list)&nbsp;of&nbsp;operations.<br>
*&nbsp;each&nbsp;array&nbsp;element&nbsp;is&nbsp;a&nbsp;separate&nbsp;operation,&nbsp;and&nbsp;operations&nbsp;are&nbsp;applied&nbsp;in&nbsp;the&nbsp;order&nbsp;they&nbsp;appear&nbsp;in&nbsp;the&nbsp;document.<br>
<br>
Each&nbsp;operation&nbsp;may&nbsp;also&nbsp;have&nbsp;an&nbsp;optional&nbsp;`comment`&nbsp;field&nbsp;with&nbsp;an&nbsp;arbitrary&nbsp;description:<br>
<br>
```yaml<br>
operations:<br>
&nbsp;&nbsp;-&nbsp;path:&nbsp;src/foo.cpp<br>
&nbsp;&nbsp;&nbsp;&nbsp;op:&nbsp;replace_text<br>
&nbsp;&nbsp;&nbsp;&nbsp;comment:&nbsp;&quot;Local&nbsp;note&nbsp;for&nbsp;this&nbsp;operation&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;...<br>
```<br>
<br>
The&nbsp;`comment`&nbsp;field&nbsp;does&nbsp;not&nbsp;affect&nbsp;how&nbsp;the&nbsp;patch&nbsp;is&nbsp;applied&nbsp;and&nbsp;is&nbsp;only&nbsp;used&nbsp;for&nbsp;human-readable&nbsp;explanations.<br>
<br>
---<br>
<br>
##&nbsp;2.&nbsp;Markers,&nbsp;Whitespace,&nbsp;and&nbsp;Ignoring&nbsp;Comments<br>
<br>
Text&nbsp;commands&nbsp;use&nbsp;the&nbsp;following&nbsp;fields:<br>
<br>
*&nbsp;`marker`&nbsp;—&nbsp;the&nbsp;main&nbsp;fragment&nbsp;to&nbsp;search&nbsp;for;<br>
*&nbsp;`before`&nbsp;—&nbsp;context&nbsp;before&nbsp;the&nbsp;marker&nbsp;(optional);<br>
*&nbsp;`after`&nbsp;—&nbsp;context&nbsp;after&nbsp;the&nbsp;marker&nbsp;(optional).<br>
<br>
The&nbsp;last&nbsp;two&nbsp;are&nbsp;optional.&nbsp;They&nbsp;can&nbsp;be&nbsp;used&nbsp;to&nbsp;disambiguate&nbsp;the&nbsp;marker&nbsp;if&nbsp;the&nbsp;file&nbsp;contains&nbsp;repeated&nbsp;fragments.<br>
All&nbsp;three&nbsp;fields&nbsp;are&nbsp;multi-line&nbsp;YAML&nbsp;scalars&nbsp;(`|`&nbsp;/&nbsp;`|-`).<br>
<br>
**Marker&nbsp;search:**<br>
<br>
When&nbsp;searching&nbsp;for&nbsp;a&nbsp;marker,&nbsp;we&nbsp;**ignore&nbsp;differences&nbsp;in&nbsp;indentation,&nbsp;trailing&nbsp;spaces,&nbsp;and&nbsp;the&nbsp;number&nbsp;of&nbsp;blank&nbsp;lines**,&nbsp;so&nbsp;that&nbsp;patches&nbsp;do&nbsp;not&nbsp;break&nbsp;because&nbsp;of&nbsp;formatting&nbsp;differences&nbsp;between&nbsp;various&nbsp;IDEs&nbsp;(Integrated&nbsp;Development&nbsp;Environments)&nbsp;and&nbsp;web&nbsp;viewers,&nbsp;including&nbsp;those&nbsp;used&nbsp;by&nbsp;neural&nbsp;networks&nbsp;when&nbsp;they&nbsp;fetch&nbsp;code&nbsp;from&nbsp;internet&nbsp;links.<br>
<br>
We&nbsp;also&nbsp;**ignore&nbsp;comments&nbsp;in&nbsp;the&nbsp;programming&nbsp;language&nbsp;specified&nbsp;in&nbsp;`language`**.&nbsp;This&nbsp;is&nbsp;because&nbsp;a&nbsp;neural&nbsp;network&nbsp;often&nbsp;drops&nbsp;comments&nbsp;when&nbsp;rewriting&nbsp;the&nbsp;marker&nbsp;text.&nbsp;If&nbsp;the&nbsp;model&nbsp;does&nbsp;include&nbsp;a&nbsp;comment&nbsp;into&nbsp;the&nbsp;marker&nbsp;(which&nbsp;also&nbsp;happens),&nbsp;the&nbsp;tool&nbsp;will&nbsp;still&nbsp;parse&nbsp;this&nbsp;case&nbsp;correctly.<br>
<br>
Marker&nbsp;processing&nbsp;rules:<br>
<br>
*&nbsp;spaces&nbsp;and&nbsp;tab&nbsp;characters&nbsp;at&nbsp;the&nbsp;beginning&nbsp;and&nbsp;end&nbsp;of&nbsp;each&nbsp;line&nbsp;are&nbsp;removed;<br>
*&nbsp;blank&nbsp;lines&nbsp;are&nbsp;ignored;<br>
*&nbsp;the&nbsp;resulting&nbsp;`[begin,&nbsp;end]`&nbsp;range&nbsp;is&nbsp;computed&nbsp;over&nbsp;the&nbsp;real&nbsp;file&nbsp;lines,&nbsp;including&nbsp;the&nbsp;blank&nbsp;lines&nbsp;that&nbsp;were&nbsp;skipped&nbsp;for&nbsp;matching&nbsp;purposes.<br>
<br>
From&nbsp;CHUNK’s&nbsp;point&nbsp;of&nbsp;view,&nbsp;the&nbsp;following&nbsp;markers&nbsp;are&nbsp;identical:<br>
<br>
```text<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;A<br>
<br>
B<br>
```<br>
<br>
```text<br>
A<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;B<br>
```<br>
<br>
because&nbsp;they&nbsp;are&nbsp;both&nbsp;reduced&nbsp;to&nbsp;the&nbsp;canonical&nbsp;form<br>
<br>
```text<br>
A<br>
B<br>
```<br>
<br>
---<br>
<br>
##&nbsp;3.&nbsp;`payload`&nbsp;Indentation<br>
<br>
By&nbsp;default,&nbsp;the&nbsp;indentation&nbsp;of&nbsp;the&nbsp;inserted&nbsp;text&nbsp;(`payload`)&nbsp;is&nbsp;aligned&nbsp;with&nbsp;the&nbsp;indentation&nbsp;of&nbsp;the&nbsp;beginning&nbsp;of&nbsp;the&nbsp;marker,&nbsp;but&nbsp;this&nbsp;behavior&nbsp;can&nbsp;be&nbsp;changed:<br>
<br>
```yaml<br>
operations:<br>
&nbsp;&nbsp;-&nbsp;path:&nbsp;src/foo.cpp<br>
&nbsp;&nbsp;&nbsp;&nbsp;op:&nbsp;replace_text<br>
&nbsp;&nbsp;&nbsp;&nbsp;marker:&nbsp;|-<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;value()&nbsp;const;<br>
&nbsp;&nbsp;&nbsp;&nbsp;payload:&nbsp;|-<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;value()&nbsp;const&nbsp;noexcept;<br>
&nbsp;&nbsp;&nbsp;&nbsp;options:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;indent:&nbsp;&lt;mode&gt;<br>
```<br>
<br>
Indentation&nbsp;modes:<br>
<br>
*&nbsp;`from-marker`&nbsp;/&nbsp;`marker`&nbsp;/&nbsp;`auto`&nbsp;—&nbsp;align&nbsp;the&nbsp;`payload`&nbsp;to&nbsp;the&nbsp;marker’s&nbsp;indentation<br>
&nbsp;&nbsp;(this&nbsp;is&nbsp;the&nbsp;default&nbsp;mode&nbsp;if&nbsp;`options.indent`&nbsp;is&nbsp;not&nbsp;provided);<br>
*&nbsp;`none`&nbsp;/&nbsp;`as-is`&nbsp;—&nbsp;leave&nbsp;`payload`&nbsp;indentation&nbsp;“as&nbsp;is”&nbsp;according&nbsp;to&nbsp;YAML&nbsp;rules.<br>
<br>
The&nbsp;base&nbsp;indentation&nbsp;is&nbsp;taken&nbsp;from:<br>
<br>
*&nbsp;for&nbsp;text&nbsp;commands&nbsp;—&nbsp;the&nbsp;first&nbsp;line&nbsp;of&nbsp;the&nbsp;marker&nbsp;range;<br>
*&nbsp;for&nbsp;C++&nbsp;/&nbsp;Python&nbsp;commands&nbsp;—&nbsp;the&nbsp;line&nbsp;where&nbsp;the&nbsp;class&nbsp;or&nbsp;method&nbsp;is&nbsp;declared.<br>
<br>
Indentation&nbsp;is&nbsp;added&nbsp;only&nbsp;to&nbsp;**non-empty**&nbsp;lines&nbsp;of&nbsp;the&nbsp;`payload`.<br>
<br>
---<br>
<br>
##&nbsp;4.&nbsp;File&nbsp;Commands<br>
<br>
###&nbsp;4.1.&nbsp;`create_file`<br>
<br>
Create&nbsp;or&nbsp;overwrite&nbsp;a&nbsp;file:<br>
<br>
```yaml<br>
operations:<br>
&nbsp;&nbsp;-&nbsp;path:&nbsp;src/hello.cpp<br>
&nbsp;&nbsp;&nbsp;&nbsp;op:&nbsp;create_file<br>
&nbsp;&nbsp;&nbsp;&nbsp;payload:&nbsp;|-<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#include&nbsp;&lt;iostream&gt;<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;main()&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::cout&nbsp;&lt;&lt;&nbsp;&quot;Hello\n&quot;;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;0;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
```<br>
<br>
*&nbsp;`path`&nbsp;—&nbsp;the&nbsp;target&nbsp;file.<br>
*&nbsp;`payload`&nbsp;—&nbsp;file&nbsp;contents&nbsp;(may&nbsp;be&nbsp;empty&nbsp;→&nbsp;empty&nbsp;file).<br>
<br>
###&nbsp;4.2.&nbsp;`delete_file`<br>
<br>
Delete&nbsp;a&nbsp;file:<br>
<br>
```yaml<br>
operations:<br>
&nbsp;&nbsp;-&nbsp;path:&nbsp;src/obsolete.cpp<br>
&nbsp;&nbsp;&nbsp;&nbsp;op:&nbsp;delete_file<br>
```<br>
<br>
---<br>
<br>
##&nbsp;5.&nbsp;Text&nbsp;Commands<br>
<br>
These&nbsp;work&nbsp;with&nbsp;arbitrary&nbsp;text&nbsp;using&nbsp;a&nbsp;marker.<br>
<br>
Required&nbsp;fields&nbsp;for&nbsp;a&nbsp;text&nbsp;operation:<br>
<br>
*&nbsp;`path`<br>
*&nbsp;`op:&nbsp;insert_text_after&nbsp;|&nbsp;insert_text_before&nbsp;|&nbsp;replace_text&nbsp;|&nbsp;delete_text&nbsp;|&nbsp;prepend_text&nbsp;|&nbsp;append_text`<br>
*&nbsp;`marker`&nbsp;—&nbsp;required&nbsp;for&nbsp;marker-based&nbsp;operations&nbsp;(`insert_text_after`,&nbsp;`insert_text_before`,&nbsp;`replace_text`,&nbsp;`delete_text`).<br>
<br>
For&nbsp;`prepend_text`&nbsp;and&nbsp;`append_text`&nbsp;the&nbsp;`marker`&nbsp;field&nbsp;is&nbsp;not&nbsp;used:&nbsp;they&nbsp;simply&nbsp;insert&nbsp;`payload`&nbsp;at&nbsp;the&nbsp;beginning&nbsp;or&nbsp;end&nbsp;of&nbsp;the&nbsp;file.<br>
<br>
Additional&nbsp;fields:<br>
<br>
*&nbsp;`before`,&nbsp;`after`&nbsp;—&nbsp;optional&nbsp;context&nbsp;(what&nbsp;surrounds&nbsp;the&nbsp;marker);<br>
*&nbsp;`payload`&nbsp;—&nbsp;required&nbsp;for&nbsp;all&nbsp;except&nbsp;`delete_text`;<br>
*&nbsp;`comment`&nbsp;—&nbsp;optional&nbsp;human-readable&nbsp;note&nbsp;for&nbsp;the&nbsp;operation;<br>
*&nbsp;`options.indent`&nbsp;—&nbsp;optional.<br>
<br>
###&nbsp;5.1.&nbsp;`replace_text`<br>
<br>
Replace&nbsp;a&nbsp;fragment&nbsp;by&nbsp;marker:<br>
<br>
```yaml<br>
operations:<br>
&nbsp;&nbsp;-&nbsp;path:&nbsp;src/foo.cpp<br>
&nbsp;&nbsp;&nbsp;&nbsp;op:&nbsp;replace_text<br>
&nbsp;&nbsp;&nbsp;&nbsp;marker:&nbsp;|-<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;value()&nbsp;const;<br>
&nbsp;&nbsp;&nbsp;&nbsp;payload:&nbsp;|-<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;value()&nbsp;const&nbsp;noexcept;<br>
```<br>
<br>
###&nbsp;5.2.&nbsp;`insert_text_after`<br>
<br>
Insert&nbsp;text&nbsp;immediately&nbsp;**after**&nbsp;the&nbsp;marker:<br>
<br>
```yaml<br>
operations:<br>
&nbsp;&nbsp;-&nbsp;path:&nbsp;src/foo.cpp<br>
&nbsp;&nbsp;&nbsp;&nbsp;op:&nbsp;insert_text_after<br>
&nbsp;&nbsp;&nbsp;&nbsp;marker:&nbsp;|-<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;Foo::init()<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do_stuff();<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;payload:&nbsp;|-<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;Foo::log_state()&nbsp;const<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;...<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
```<br>
<br>
###&nbsp;5.3.&nbsp;`insert_text_before`<br>
<br>
Insert&nbsp;text&nbsp;**before**&nbsp;the&nbsp;marker:<br>
<br>
```yaml<br>
operations:<br>
&nbsp;&nbsp;-&nbsp;path:&nbsp;src/foo.cpp<br>
&nbsp;&nbsp;&nbsp;&nbsp;op:&nbsp;insert_text_before<br>
&nbsp;&nbsp;&nbsp;&nbsp;marker:&nbsp;|-<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;run();<br>
&nbsp;&nbsp;&nbsp;&nbsp;payload:&nbsp;|-<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;void&nbsp;debug_run();<br>
```<br>
<br>
###&nbsp;5.4.&nbsp;`delete_text`<br>
<br>
Delete&nbsp;a&nbsp;fragment&nbsp;by&nbsp;marker:<br>
<br>
```yaml<br>
operations:<br>
&nbsp;&nbsp;-&nbsp;path:&nbsp;src/foo.cpp<br>
&nbsp;&nbsp;&nbsp;&nbsp;op:&nbsp;delete_text<br>
&nbsp;&nbsp;&nbsp;&nbsp;marker:&nbsp;|-<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#include&nbsp;&quot;debug.h&quot;<br>
```<br>
<br>
###&nbsp;5.5.&nbsp;`prepend_text`<br>
<br>
Insert&nbsp;text&nbsp;at&nbsp;the&nbsp;beginning&nbsp;of&nbsp;a&nbsp;file&nbsp;without&nbsp;specifying&nbsp;a&nbsp;marker:<br>
<br>
```yaml<br>
operations:<br>
&nbsp;&nbsp;-&nbsp;path:&nbsp;src/foo.cpp<br>
&nbsp;&nbsp;&nbsp;&nbsp;op:&nbsp;prepend_text<br>
&nbsp;&nbsp;&nbsp;&nbsp;payload:&nbsp;|-<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;This&nbsp;block&nbsp;will&nbsp;be&nbsp;inserted&nbsp;at&nbsp;the&nbsp;very&nbsp;beginning&nbsp;of&nbsp;the&nbsp;file.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;...<br>
```<br>
<br>
###&nbsp;5.6.&nbsp;`append_text`<br>
<br>
Insert&nbsp;text&nbsp;at&nbsp;the&nbsp;end&nbsp;of&nbsp;a&nbsp;file&nbsp;without&nbsp;specifying&nbsp;a&nbsp;marker:<br>
<br>
```yaml<br>
operations:<br>
&nbsp;&nbsp;-&nbsp;path:&nbsp;src/foo.cpp<br>
&nbsp;&nbsp;&nbsp;&nbsp;op:&nbsp;append_text<br>
&nbsp;&nbsp;&nbsp;&nbsp;payload:&nbsp;|-<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;This&nbsp;block&nbsp;will&nbsp;be&nbsp;added&nbsp;to&nbsp;the&nbsp;very&nbsp;end&nbsp;of&nbsp;the&nbsp;file.<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;...<br>
```<br>
<br>
---<br>
<br>
##&nbsp;6.&nbsp;Commands&nbsp;for&nbsp;C++&nbsp;/&nbsp;Python&nbsp;Symbols<br>
<br>
These&nbsp;work&nbsp;with&nbsp;classes&nbsp;and&nbsp;methods&nbsp;rather&nbsp;than&nbsp;arbitrary&nbsp;text.<br>
<br>
Supported&nbsp;commands:<br>
<br>
*&nbsp;`replace_cpp_class`<br>
*&nbsp;`replace_cpp_method`<br>
*&nbsp;`replace_py_class`<br>
*&nbsp;`replace_py_method`<br>
<br>
Common&nbsp;fields:<br>
<br>
*&nbsp;`path`<br>
*&nbsp;`op`<br>
*&nbsp;`payload`&nbsp;—&nbsp;new&nbsp;code&nbsp;of&nbsp;the&nbsp;class&nbsp;or&nbsp;method;<br>
*&nbsp;`comment`&nbsp;—&nbsp;optional&nbsp;human-readable&nbsp;note&nbsp;for&nbsp;the&nbsp;operation;<br>
*&nbsp;`options.indent`&nbsp;—&nbsp;indentation&nbsp;mode.<br>
<br>
The&nbsp;target&nbsp;can&nbsp;be&nbsp;specified&nbsp;either:<br>
<br>
*&nbsp;via&nbsp;`class`&nbsp;+&nbsp;`method`,&nbsp;or<br>
*&nbsp;via&nbsp;`symbol`.<br>
<br>
###&nbsp;6.1.&nbsp;C++:&nbsp;`replace_cpp_class`<br>
<br>
```yaml<br>
operations:<br>
&nbsp;&nbsp;-&nbsp;path:&nbsp;src/foo.cpp<br>
&nbsp;&nbsp;&nbsp;&nbsp;op:&nbsp;replace_cpp_class<br>
&nbsp;&nbsp;&nbsp;&nbsp;class:&nbsp;Foo<br>
&nbsp;&nbsp;&nbsp;&nbsp;payload:&nbsp;|-<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class&nbsp;Foo&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;value()&nbsp;const&nbsp;{&nbsp;return&nbsp;42;&nbsp;}<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>
```<br>
<br>
###&nbsp;6.2.&nbsp;C++:&nbsp;`replace_cpp_method`<br>
<br>
```yaml<br>
operations:<br>
&nbsp;&nbsp;-&nbsp;path:&nbsp;src/foo.cpp<br>
&nbsp;&nbsp;&nbsp;&nbsp;op:&nbsp;replace_cpp_method<br>
&nbsp;&nbsp;&nbsp;&nbsp;class:&nbsp;Foo<br>
&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;value<br>
&nbsp;&nbsp;&nbsp;&nbsp;payload:&nbsp;|-<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;Foo::value()&nbsp;const<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;42;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
```<br>
<br>
or&nbsp;the&nbsp;short&nbsp;form:<br>
<br>
```yaml<br>
operations:<br>
&nbsp;&nbsp;-&nbsp;path:&nbsp;src/foo.cpp<br>
&nbsp;&nbsp;&nbsp;&nbsp;op:&nbsp;replace_cpp_method<br>
&nbsp;&nbsp;&nbsp;&nbsp;symbol:&nbsp;Foo::value<br>
&nbsp;&nbsp;&nbsp;&nbsp;payload:&nbsp;|-<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;Foo::value()&nbsp;const<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;42;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
```<br>
<br>
###&nbsp;6.3.&nbsp;Python:&nbsp;`replace_py_class`<br>
<br>
```yaml<br>
operations:<br>
&nbsp;&nbsp;-&nbsp;path:&nbsp;src/foo.py<br>
&nbsp;&nbsp;&nbsp;&nbsp;op:&nbsp;replace_py_class<br>
&nbsp;&nbsp;&nbsp;&nbsp;class:&nbsp;Foo<br>
&nbsp;&nbsp;&nbsp;&nbsp;payload:&nbsp;|-<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;class&nbsp;Foo:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;__init__(self):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;self.x&nbsp;=&nbsp;2<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;answer(self):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;42<br>
```<br>
<br>
###&nbsp;6.4.&nbsp;Python:&nbsp;`replace_py_method`<br>
<br>
```yaml<br>
operations:<br>
&nbsp;&nbsp;-&nbsp;path:&nbsp;src/foo.py<br>
&nbsp;&nbsp;&nbsp;&nbsp;op:&nbsp;replace_py_method<br>
&nbsp;&nbsp;&nbsp;&nbsp;class:&nbsp;Foo<br>
&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;run<br>
&nbsp;&nbsp;&nbsp;&nbsp;payload:&nbsp;|-<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;run(self):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(&quot;running...&quot;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;100<br>
```<br>
<br>
or:<br>
<br>
```yaml<br>
operations:<br>
&nbsp;&nbsp;-&nbsp;path:&nbsp;src/foo.py<br>
&nbsp;&nbsp;&nbsp;&nbsp;op:&nbsp;replace_py_method<br>
&nbsp;&nbsp;&nbsp;&nbsp;symbol:&nbsp;Foo.run<br>
&nbsp;&nbsp;&nbsp;&nbsp;payload:&nbsp;|-<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;run(self):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(&quot;running...&quot;)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;100<br>
```<br>
<br>
---<br>
<br>
##&nbsp;7.&nbsp;Example&nbsp;of&nbsp;a&nbsp;Complete&nbsp;Patch<br>
<br>
```yaml<br>
description:&nbsp;&quot;Update&nbsp;the&nbsp;value&nbsp;implementation&nbsp;in&nbsp;C++&nbsp;and&nbsp;Python&quot;<br>
language:&nbsp;python<br>
<br>
operations:<br>
&nbsp;&nbsp;-&nbsp;path:&nbsp;src/foo.cpp<br>
&nbsp;&nbsp;&nbsp;&nbsp;op:&nbsp;replace_cpp_method<br>
&nbsp;&nbsp;&nbsp;&nbsp;comment:&nbsp;&quot;Update&nbsp;Foo::value&nbsp;implementation&nbsp;in&nbsp;C++&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;class:&nbsp;Foo<br>
&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;value<br>
&nbsp;&nbsp;&nbsp;&nbsp;payload:&nbsp;|-<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;Foo::value()&nbsp;const<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;42;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
<br>
&nbsp;&nbsp;-&nbsp;path:&nbsp;src/foo.py<br>
&nbsp;&nbsp;&nbsp;&nbsp;op:&nbsp;replace_py_method<br>
&nbsp;&nbsp;&nbsp;&nbsp;comment:&nbsp;&quot;Update&nbsp;Foo.run&nbsp;implementation&nbsp;in&nbsp;Python&quot;<br>
&nbsp;&nbsp;&nbsp;&nbsp;class:&nbsp;Foo<br>
&nbsp;&nbsp;&nbsp;&nbsp;method:&nbsp;run<br>
&nbsp;&nbsp;&nbsp;&nbsp;payload:&nbsp;|-<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;def&nbsp;run(self):<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print(&quot;value:&quot;,&nbsp;self.value)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;self.value<br>
```<br>
<!-- END SCAT CODE -->
</body>
</html>

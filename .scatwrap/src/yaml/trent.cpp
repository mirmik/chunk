<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>src/yaml/trent.cpp</title>
</head>
<body>
<!-- BEGIN SCAT CODE -->
#include&nbsp;&quot;trent.h&quot;&#13;
#include&nbsp;&quot;trent_path.h&quot;&#13;
&#13;
const&nbsp;char&nbsp;*nos::typestr(nos::trent_type&nbsp;m_type)&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(m_type)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;nos::trent_type::string:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;str&quot;;&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;nos::trent_type::list:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;list&quot;;&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;nos::trent_type::dict:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;dict&quot;;&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;nos::trent_type::numer:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;num&quot;;&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;nos::trent_type::boolean:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;bool&quot;;&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;nos::trent_type::nil:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;nil&quot;;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;}&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&quot;&quot;;&#13;
}&#13;
&#13;
const&nbsp;nos::trent&nbsp;&amp;nos::trent::static_nil()&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;const&nbsp;trent&nbsp;_nil;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;_nil;&#13;
}&#13;
&#13;
nos::trent::wrong_path::wrong_path(const&nbsp;nos::trent_path&nbsp;&amp;path)&nbsp;:&nbsp;path(path)&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;str&nbsp;=&nbsp;std::string(&quot;trent:wrong_path:&nbsp;&quot;)&nbsp;+&nbsp;path.to_string();&#13;
}&#13;
&#13;
const&nbsp;char&nbsp;*nos::trent::wrong_path::what()&nbsp;const&nbsp;noexcept&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;str.c_str();&#13;
}&#13;
&#13;
nos::trent::wrong_type::wrong_type(const&nbsp;trent_path&nbsp;&amp;path,&nbsp;type&nbsp;t,&nbsp;type&nbsp;rt)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;path(path),&nbsp;t(t)&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;str&nbsp;=&nbsp;std::string(&quot;trent:wrong_type:&quot;)&nbsp;+&nbsp;std::string(&quot;&nbsp;path:&quot;)&nbsp;+&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;path.to_string()&nbsp;+&nbsp;std::string(&quot;&nbsp;request:&quot;)&nbsp;+&nbsp;nos::typestr(t)&nbsp;+&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string(&quot;&nbsp;realtype:&quot;)&nbsp;+&nbsp;nos::typestr(rt);&#13;
}&#13;
&#13;
const&nbsp;char&nbsp;*nos::trent::wrong_type::what()&nbsp;const&nbsp;noexcept&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;str.c_str();&#13;
}&#13;
&#13;
nos::trent::wrong_index::wrong_index(const&nbsp;trent_path&nbsp;&amp;path,&nbsp;type&nbsp;t)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;path(path),&nbsp;t(t)&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;str&nbsp;=&nbsp;std::string(&quot;trent:wrong_index:&nbsp;path:&nbsp;&quot;)&nbsp;+&nbsp;path.to_string()&nbsp;+&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::string(&quot;&nbsp;index:&nbsp;&quot;)&nbsp;+&nbsp;nos::typestr(t);&#13;
}&#13;
&#13;
const&nbsp;char&nbsp;*nos::trent::wrong_index::what()&nbsp;const&nbsp;noexcept&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;str.c_str();&#13;
}&#13;
&#13;
const&nbsp;char&nbsp;*nos::trent::typestr()&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nos::typestr(m_type);&#13;
}&#13;
&#13;
nos::trent::~trent()&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;invalidate();&#13;
}&#13;
&#13;
nos::trent::trent()&nbsp;:&nbsp;m_type(type::nil)&nbsp;{}&#13;
&#13;
nos::trent::trent(const&nbsp;trent&nbsp;&amp;other)&nbsp;:&nbsp;m_type(other.m_type)&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(m_type)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;trent::type::string:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nos::constructor(&amp;m_str,&nbsp;other.m_str);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;trent::type::list:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nos::constructor(&amp;m_arr,&nbsp;other.m_arr);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;trent::type::dict:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nos::constructor(&amp;m_dct,&nbsp;other.m_dct);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;trent::type::numer:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_num&nbsp;=&nbsp;other.m_num;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;trent::type::boolean:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_bool&nbsp;=&nbsp;other.m_bool;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;trent::type::nil:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;}&#13;
}&#13;
&#13;
nos::trent::trent(trent&nbsp;&amp;&amp;other)&nbsp;noexcept&nbsp;:&nbsp;m_type(other.m_type)&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(m_type)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;trent::type::string:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nos::move_constructor(&amp;m_str,&nbsp;std::move(other.m_str));&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;trent::type::list:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nos::move_constructor(&amp;m_arr,&nbsp;std::move(other.m_arr));&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;trent::type::dict:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nos::move_constructor(&amp;m_dct,&nbsp;std::move(other.m_dct));&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;trent::type::numer:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_num&nbsp;=&nbsp;other.m_num;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;trent::type::boolean:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_bool&nbsp;=&nbsp;other.m_bool;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;trent::type::nil:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;}&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;other.invalidate();&#13;
}&#13;
&#13;
void&nbsp;nos::trent::invalidate()&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(m_type)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;type::string:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nos::destructor(&amp;m_str);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;type::list:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nos::destructor(&amp;m_arr);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;type::dict:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nos::destructor(&amp;m_dct);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;default:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;}&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;m_type&nbsp;=&nbsp;type::nil;&#13;
}&#13;
&#13;
void&nbsp;nos::trent::init_sint(const&nbsp;int64_t&nbsp;&amp;i)&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;m_type&nbsp;=&nbsp;type::numer;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;m_num&nbsp;=&nbsp;static_cast&lt;numer_type&gt;(i);&#13;
}&#13;
&#13;
void&nbsp;nos::trent::init_uint(const&nbsp;uint64_t&nbsp;&amp;i)&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;m_type&nbsp;=&nbsp;type::numer;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;m_num&nbsp;=&nbsp;i;&#13;
}&#13;
&#13;
void&nbsp;nos::trent::init_flt(const&nbsp;long&nbsp;double&nbsp;&amp;i)&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;m_type&nbsp;=&nbsp;type::numer;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;m_num&nbsp;=&nbsp;i;&#13;
}&#13;
&#13;
void&nbsp;nos::trent::init_str(const&nbsp;char&nbsp;*data,&nbsp;size_t&nbsp;size)&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;m_type&nbsp;=&nbsp;type::string;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;nos::constructor(&amp;m_str,&nbsp;data,&nbsp;size);&#13;
}&#13;
&#13;
void&nbsp;nos::trent::init(trent::type&nbsp;t)&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m_type&nbsp;!=&nbsp;trent::type::nil)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;invalidate();&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;m_type&nbsp;=&nbsp;t;&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(m_type)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;trent::type::string:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nos::constructor(&amp;m_str);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;trent::type::list:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nos::constructor(&amp;m_arr);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;trent::type::dict:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nos::constructor(&amp;m_dct);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;default:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;}&#13;
}&#13;
nos::trent&nbsp;&amp;nos::trent::operator[](int&nbsp;i)&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m_type&nbsp;!=&nbsp;type::list)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;init(type::list);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m_arr.size()&nbsp;&lt;=&nbsp;(unsigned&nbsp;int)i)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_arr.resize(i&nbsp;+&nbsp;1);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_arr[i];&#13;
}&#13;
&#13;
nos::trent&nbsp;&amp;nos::trent::operator[](const&nbsp;char&nbsp;*key)&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m_type&nbsp;!=&nbsp;type::dict)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;init(type::dict);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_dct[std::string(key)];&#13;
}&#13;
&#13;
nos::trent&nbsp;&amp;nos::trent::operator[](const&nbsp;std::string&nbsp;&amp;key)&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m_type&nbsp;!=&nbsp;type::dict)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;init(type::dict);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_dct[key];&#13;
}&#13;
&#13;
nos::trent&nbsp;&amp;nos::trent::operator[](const&nbsp;nos::buffer&nbsp;&amp;key)&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m_type&nbsp;!=&nbsp;type::dict)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;init(type::dict);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_dct[std::string(key.data(),&nbsp;key.size())];&#13;
}&#13;
&#13;
const&nbsp;nos::trent&nbsp;&amp;nos::trent::operator[](const&nbsp;std::string&nbsp;&amp;obj)&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m_type&nbsp;!=&nbsp;type::dict&nbsp;||&nbsp;!contains(obj))&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;static_nil();&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;at(obj);&#13;
}&#13;
&#13;
const&nbsp;nos::trent&nbsp;&amp;nos::trent::operator[](const&nbsp;nos::buffer&nbsp;&amp;obj)&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;std::string&nbsp;key(obj.data(),&nbsp;obj.size());&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m_type&nbsp;!=&nbsp;type::dict&nbsp;||&nbsp;!contains(key))&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;static_nil();&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;at(key);&#13;
}&#13;
&#13;
const&nbsp;nos::trent&nbsp;&amp;nos::trent::operator[](const&nbsp;char&nbsp;*obj)&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m_type&nbsp;!=&nbsp;type::dict&nbsp;||&nbsp;!contains(obj))&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;static_nil();&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;at(obj);&#13;
}&#13;
&#13;
const&nbsp;nos::trent&nbsp;&amp;nos::trent::operator[](int&nbsp;obj)&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m_type&nbsp;!=&nbsp;type::list)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;static_nil();&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;at(obj);&#13;
}&#13;
&#13;
const&nbsp;nos::trent&nbsp;&amp;nos::trent::operator[](const&nbsp;trent_path&nbsp;&amp;path)&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;trent&nbsp;*tr&nbsp;=&nbsp;this;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(const&nbsp;auto&nbsp;&amp;p&nbsp;:&nbsp;path)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(p.is_string)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tr&nbsp;=&nbsp;&amp;tr-&gt;at(p.str);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tr&nbsp;=&nbsp;&amp;tr-&gt;at(p.i32);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&#13;
&nbsp;&nbsp;&nbsp;&nbsp;}&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;*tr;&#13;
}&#13;
&#13;
nos::trent&nbsp;&amp;nos::trent::operator[](const&nbsp;trent_path&nbsp;&amp;path)&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;trent&nbsp;*tr&nbsp;=&nbsp;this;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(auto&nbsp;&amp;p&nbsp;:&nbsp;path)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(p.is_string)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tr&nbsp;=&nbsp;&amp;((*tr)[p.str]);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tr&nbsp;=&nbsp;&amp;((*tr)[p.i32]);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&#13;
&nbsp;&nbsp;&nbsp;&nbsp;}&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;*tr;&#13;
}&#13;
&#13;
const&nbsp;nos::trent&nbsp;&amp;nos::trent::at(const&nbsp;trent_path&nbsp;&amp;path)&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;trent&nbsp;*tr&nbsp;=&nbsp;this;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(const&nbsp;auto&nbsp;&amp;p&nbsp;:&nbsp;path)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(p.is_string)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tr&nbsp;=&nbsp;&amp;tr-&gt;at(p.str);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tr&nbsp;=&nbsp;&amp;tr-&gt;at(p.i32);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&#13;
&nbsp;&nbsp;&nbsp;&nbsp;}&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;*tr;&#13;
}&#13;
&#13;
nos::trent&nbsp;&amp;nos::trent::at(const&nbsp;trent_path&nbsp;&amp;path)&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;trent&nbsp;*tr&nbsp;=&nbsp;this;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(auto&nbsp;&amp;p&nbsp;:&nbsp;path)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(p.is_string)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tr&nbsp;=&nbsp;&amp;tr-&gt;at(p.str);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tr&nbsp;=&nbsp;&amp;tr-&gt;at(p.i32);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&#13;
&nbsp;&nbsp;&nbsp;&nbsp;}&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;*tr;&#13;
}&#13;
&#13;
bool&nbsp;nos::trent::contains(const&nbsp;char&nbsp;*key)&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m_type&nbsp;!=&nbsp;type::dict)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_dct.find(key)&nbsp;!=&nbsp;m_dct.end();&#13;
}&#13;
&#13;
bool&nbsp;nos::trent::contains(std::string&nbsp;key)&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m_type&nbsp;!=&nbsp;type::dict)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_dct.find(std::string(key))&nbsp;!=&nbsp;m_dct.end();&#13;
}&#13;
&#13;
void&nbsp;nos::trent::init_from_list(const&nbsp;std::initializer_list&lt;double&gt;&nbsp;l)&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;init(type::list);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;m_arr.reserve(l.size());&#13;
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(auto&nbsp;&amp;i&nbsp;:&nbsp;l)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_arr.emplace_back(i);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;}&#13;
}&#13;
&#13;
void&nbsp;nos::trent::init_from_list(const&nbsp;std::initializer_list&lt;std::string&gt;&nbsp;l)&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;init(type::list);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;m_arr.reserve(l.size());&#13;
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(auto&nbsp;&amp;i&nbsp;:&nbsp;l)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_arr.emplace_back(i);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;}&#13;
}&#13;
&#13;
nos::trent&nbsp;&amp;nos::trent::at(int&nbsp;i)&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m_type&nbsp;!=&nbsp;type::list)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;std::runtime_error(std::string(&quot;trent:&nbsp;is&nbsp;not&nbsp;a&nbsp;list:&nbsp;&quot;)&nbsp;+&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nos::typestr(m_type));&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m_arr.size()&nbsp;&lt;=&nbsp;(unsigned&nbsp;int)i)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;std::runtime_error(std::string(&quot;trent:wrong_index:&nbsp;&quot;)&nbsp;+&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::to_string(i));&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_arr[i];&#13;
}&#13;
&#13;
const&nbsp;nos::trent&nbsp;&amp;nos::trent::at(int&nbsp;i)&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m_type&nbsp;!=&nbsp;type::list)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;std::runtime_error(std::string(&quot;trent:&nbsp;is&nbsp;not&nbsp;a&nbsp;list:&nbsp;&quot;)&nbsp;+&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nos::typestr(m_type));&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m_arr.size()&nbsp;&lt;=&nbsp;(unsigned&nbsp;int)i)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;std::runtime_error(std::string(&quot;trent:wrong_index:&nbsp;&quot;)&nbsp;+&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;std::to_string(i));&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_arr[i];&#13;
}&#13;
&#13;
const&nbsp;nos::trent&nbsp;&amp;nos::trent::at(const&nbsp;std::string&nbsp;&amp;key)&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m_type&nbsp;!=&nbsp;type::dict)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;std::runtime_error(std::string(&quot;trent:&nbsp;is&nbsp;not&nbsp;a&nbsp;dict:&nbsp;&quot;)&nbsp;+&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nos::typestr(m_type));&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_dct.at(key);&#13;
}&#13;
&#13;
nos::trent&nbsp;&amp;nos::trent::at(const&nbsp;std::string&nbsp;&amp;key)&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m_type&nbsp;!=&nbsp;type::dict)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;std::runtime_error(std::string(&quot;trent:&nbsp;is&nbsp;not&nbsp;a&nbsp;dict:&nbsp;&quot;)&nbsp;+&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nos::typestr(m_type));&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_dct.at(key);&#13;
}&#13;
&#13;
const&nbsp;nos::trent&nbsp;&amp;nos::trent::at(const&nbsp;char&nbsp;*key)&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m_type&nbsp;!=&nbsp;type::dict)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;std::runtime_error(std::string(&quot;trent:&nbsp;is&nbsp;not&nbsp;a&nbsp;dict:&nbsp;&quot;)&nbsp;+&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nos::typestr(m_type));&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_dct.at(std::string(key));&#13;
}&#13;
&#13;
nos::trent&nbsp;&amp;nos::trent::at(const&nbsp;char&nbsp;*key)&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m_type&nbsp;!=&nbsp;type::dict)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;std::runtime_error(std::string(&quot;trent:&nbsp;is&nbsp;not&nbsp;a&nbsp;dict:&nbsp;&quot;)&nbsp;+&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nos::typestr(m_type));&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_dct.at(std::string(key));&#13;
}&#13;
&#13;
void&nbsp;nos::trent::push_back(const&nbsp;trent&nbsp;&amp;tr)&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(m_type&nbsp;!=&nbsp;type::list)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;init(type::list);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;m_arr.push_back(tr);&#13;
}&#13;
&#13;
const&nbsp;nos::trent&nbsp;*nos::trent::_get(const&nbsp;std::string&nbsp;&amp;str)&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(is_dict())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;auto&nbsp;it&nbsp;=&nbsp;m_dct.find(str);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(it&nbsp;==&nbsp;m_dct.end())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nullptr;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&amp;it-&gt;second;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;}&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nullptr;&#13;
}&#13;
&#13;
const&nbsp;nos::trent&nbsp;*nos::trent::_get(const&nbsp;char&nbsp;*str)&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;get(std::string(str));&#13;
}&#13;
&#13;
const&nbsp;nos::trent&nbsp;*nos::trent::_get(int&nbsp;index)&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(is_list())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&amp;m_arr[index];&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nullptr;&#13;
}&#13;
&#13;
const&nbsp;nos::trent&nbsp;*nos::trent::get(const&nbsp;trent_path&nbsp;&amp;path)&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;trent&nbsp;*tr&nbsp;=&nbsp;this;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(const&nbsp;auto&nbsp;&amp;p&nbsp;:&nbsp;path)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(p.is_string)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!tr-&gt;is_dict())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nullptr;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tr&nbsp;=&nbsp;tr-&gt;_get(p.str);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tr&nbsp;=&nbsp;tr-&gt;_get(p.i32);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(tr&nbsp;==&nbsp;nullptr)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nullptr;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;}&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;tr;&#13;
}&#13;
&#13;
const&nbsp;nos::trent&nbsp;&amp;nos::trent::get_except(const&nbsp;trent_path&nbsp;&amp;path)&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;trent&nbsp;*tr&nbsp;=&nbsp;get(path);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(tr&nbsp;==&nbsp;nullptr)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;wrong_path(path);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;}&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;*tr;&#13;
}&#13;
nos::trent::numer_type&#13;
nos::trent::get_as_numer_ex(const&nbsp;trent_path&nbsp;&amp;path)&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;trent&nbsp;&amp;tr&nbsp;=&nbsp;get_except(path);&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(tr.m_type&nbsp;!=&nbsp;trent_type::numer)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;wrong_type(path,&nbsp;trent_type::numer,&nbsp;tr.m_type);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;}&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;tr.m_num;&#13;
}&#13;
&#13;
const&nbsp;nos::trent::string_type&nbsp;&amp;&#13;
nos::trent::get_as_string_ex(const&nbsp;trent_path&nbsp;&amp;path)&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;trent&nbsp;&amp;tr&nbsp;=&nbsp;get_except(path);&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(tr.m_type&nbsp;!=&nbsp;trent_type::string)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;wrong_type(path,&nbsp;trent_type::string,&nbsp;tr.m_type);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;}&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;tr.m_str;&#13;
}&#13;
&#13;
bool&nbsp;nos::trent::get_as_boolean_ex(const&nbsp;trent_path&nbsp;&amp;path)&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;trent&nbsp;&amp;tr&nbsp;=&nbsp;get_except(path);&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(tr.m_type&nbsp;!=&nbsp;trent_type::boolean)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;wrong_type(path,&nbsp;trent_type::boolean,&nbsp;tr.m_type);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;}&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;tr.m_bool;&#13;
}&#13;
&#13;
nos::trent::numer_type&#13;
nos::trent::get_as_numer_def(const&nbsp;trent_path&nbsp;&amp;path,&nbsp;numer_type&nbsp;def)&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;trent&nbsp;*tr&nbsp;=&nbsp;get(path);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(tr&nbsp;==&nbsp;nullptr&nbsp;||&nbsp;tr-&gt;m_type&nbsp;!=&nbsp;trent_type::numer)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;def;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;tr-&gt;m_num;&#13;
}&#13;
&#13;
const&nbsp;nos::trent::string_type&nbsp;&amp;&#13;
nos::trent::get_as_string_def(const&nbsp;trent_path&nbsp;&amp;path,&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;std::string&nbsp;&amp;def)&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;trent&nbsp;*tr&nbsp;=&nbsp;get(path);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(tr&nbsp;==&nbsp;nullptr&nbsp;||&nbsp;tr-&gt;m_type&nbsp;!=&nbsp;trent_type::string)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;def;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;tr-&gt;m_str;&#13;
}&#13;
&#13;
bool&nbsp;nos::trent::get_as_boolean_def(const&nbsp;trent_path&nbsp;&amp;path,&nbsp;bool&nbsp;def)&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;trent&nbsp;*tr&nbsp;=&nbsp;get(path);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(tr&nbsp;==&nbsp;nullptr&nbsp;||&nbsp;tr-&gt;m_type&nbsp;!=&nbsp;trent_type::boolean)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;def;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;tr-&gt;m_bool;&#13;
}&#13;
&#13;
nos::trent::string_type&nbsp;&amp;nos::trent::as_string()&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_string())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;init(type::string);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_str;&#13;
}&#13;
&#13;
const&nbsp;nos::trent::string_type&nbsp;&amp;nos::trent::as_string()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_string())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;std::runtime_error(std::string(&quot;trent:&nbsp;is&nbsp;not&nbsp;a&nbsp;string:&nbsp;&quot;)&nbsp;+&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nos::typestr(m_type));&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_str;&#13;
}&#13;
&#13;
nos::expected&lt;nos::trent::string_type&nbsp;&amp;,&nbsp;nos::errstring&gt;&#13;
nos::trent::as_string_critical()&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_string())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;errstring(&quot;is't&nbsp;string&quot;);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_str;&#13;
}&#13;
&#13;
nos::expected&lt;const&nbsp;nos::trent::string_type&nbsp;&amp;,&nbsp;nos::errstring&gt;&#13;
nos::trent::as_string_critical()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_string())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;errstring(&quot;is't&nbsp;string&quot;);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_str;&#13;
}&#13;
&#13;
nos::trent::string_type&nbsp;&amp;nos::trent::as_string_except()&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_string())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;std::runtime_error(&quot;isn't&nbsp;string&quot;);&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_str;&#13;
}&#13;
&#13;
const&nbsp;nos::trent::string_type&nbsp;&amp;nos::trent::as_string_except()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_string())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;std::runtime_error(&quot;isn't&nbsp;string&quot;);&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_str;&#13;
}&#13;
&#13;
const&nbsp;nos::trent::string_type&nbsp;&amp;&#13;
nos::trent::as_string_default(const&nbsp;string_type&nbsp;&amp;def)&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_string())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;def;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_str;&#13;
}&#13;
&#13;
nos::trent::dict_type&nbsp;&amp;nos::trent::as_dict()&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_dict())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;init(type::dict);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_dct;&#13;
}&#13;
&#13;
const&nbsp;nos::trent::dict_type&nbsp;&amp;nos::trent::as_dict()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_dict())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;std::runtime_error(&quot;is't&nbsp;dict&quot;);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_dct;&#13;
}&#13;
&#13;
nos::expected&lt;nos::trent::dict_type&nbsp;&amp;,&nbsp;nos::errstring&gt;&#13;
nos::trent::as_dict_critical()&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_dict())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;errstring(&quot;is't&nbsp;list&quot;);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_dct;&#13;
}&#13;
&#13;
nos::expected&lt;const&nbsp;nos::trent::dict_type&nbsp;&amp;,&nbsp;nos::errstring&gt;&#13;
nos::trent::as_dict_critical()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_dict())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;errstring(&quot;is't&nbsp;list&quot;);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_dct;&#13;
}&#13;
&#13;
nos::trent::dict_type&nbsp;&amp;nos::trent::as_dict_except()&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_dict())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;std::runtime_error(&quot;is't&nbsp;list&quot;);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_dct;&#13;
}&#13;
&#13;
const&nbsp;nos::trent::dict_type&nbsp;&amp;nos::trent::as_dict_except()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_dict())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;std::runtime_error(&quot;is't&nbsp;list&quot;);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_dct;&#13;
}&#13;
&#13;
nos::trent::list_type&nbsp;&amp;nos::trent::as_list()&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_list())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;init(type::list);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_arr;&#13;
}&#13;
&#13;
const&nbsp;nos::trent::list_type&nbsp;&amp;nos::trent::as_list()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_list())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;std::runtime_error(&quot;is't&nbsp;list&quot;);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_arr;&#13;
}&#13;
&#13;
nos::expected&lt;nos::trent::list_type&nbsp;&amp;,&nbsp;nos::errstring&gt;&#13;
nos::trent::as_list_critical()&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_list())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;errstring(&quot;is't&nbsp;list&quot;);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_arr;&#13;
}&#13;
&#13;
nos::expected&lt;const&nbsp;nos::trent::list_type&nbsp;&amp;,&nbsp;nos::errstring&gt;&#13;
nos::trent::as_list_critical()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_list())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;errstring(&quot;is't&nbsp;list&quot;);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_arr;&#13;
}&#13;
&#13;
nos::trent::list_type&nbsp;&amp;nos::trent::as_list_except()&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_list())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;std::runtime_error(&quot;is't&nbsp;list&quot;);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_arr;&#13;
}&#13;
&#13;
const&nbsp;nos::trent::list_type&nbsp;&amp;nos::trent::as_list_except()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_list())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;std::runtime_error(&quot;is't&nbsp;list&quot;);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_arr;&#13;
}&#13;
&#13;
nos::trent::numer_type&nbsp;nos::trent::as_numer()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(is_bool())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(int)m_bool;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(is_string())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;std::stod(m_str);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_numer())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;std::runtime_error(&quot;is't&nbsp;numer&quot;);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_num;&#13;
}&#13;
&#13;
nos::trent::integer_type&nbsp;nos::trent::as_integer()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(is_bool())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(int)m_bool;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_numer())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;std::runtime_error(&quot;is't&nbsp;numer&quot;);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_num;&#13;
}&#13;
&#13;
nos::expected&lt;nos::trent::numer_type,&nbsp;nos::errstring&gt;&#13;
nos::trent::as_numer_critical()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(is_bool())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(int)m_bool;&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_numer())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;errstring(&quot;is't&nbsp;numer&quot;);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_num;&#13;
}&#13;
&#13;
nos::trent::numer_type&nbsp;nos::trent::as_numer_except()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(is_bool())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(int)m_bool;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_numer())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;std::runtime_error(&quot;is't&nbsp;numer&quot;);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_num;&#13;
}&#13;
&#13;
nos::trent::numer_type&nbsp;nos::trent::as_numer_default(numer_type&nbsp;def)&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(is_bool())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(int)m_bool;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_numer())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;def;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_num;&#13;
}&#13;
&#13;
int64_t&nbsp;nos::trent::as_integer_default(int64_t&nbsp;def)&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;as_numer_default(def);&#13;
}&#13;
&#13;
nos::expected&lt;int64_t,&nbsp;nos::errstring&gt;&#13;
nos::trent::as_integer_critical()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_numer())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;errstring(&quot;is't&nbsp;numer&quot;);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_num;&#13;
}&#13;
&#13;
int64_t&nbsp;nos::trent::as_integer_except()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_numer())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;std::runtime_error(&quot;is't&nbsp;numer&quot;);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_num;&#13;
}&#13;
&#13;
bool&nbsp;nos::trent::as_bool()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_bool;&#13;
}&#13;
&#13;
bool&nbsp;nos::trent::as_bool_default(bool&nbsp;def)&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_bool())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;def;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_bool;&#13;
}&#13;
&#13;
nos::expected&lt;bool,&nbsp;nos::errstring&gt;&nbsp;nos::trent::as_bool_critical()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_bool())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;errstring(&quot;is't&nbsp;bool&quot;);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_bool;&#13;
}&#13;
&#13;
bool&nbsp;nos::trent::as_bool_except()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_bool())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;std::runtime_error(&quot;is't&nbsp;bool&quot;);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_bool;&#13;
}&#13;
&#13;
const&nbsp;nos::buffer&nbsp;nos::trent::as_buffer()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!is_string())&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;std::runtime_error(&quot;is't&nbsp;string&quot;);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;nos::buffer(m_str.data(),&nbsp;m_str.size());&#13;
}&#13;
&#13;
nos::trent::numer_type&nbsp;&amp;nos::trent::unsafe_numer_const()&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_num;&#13;
}&#13;
&#13;
nos::trent::string_type&nbsp;&amp;nos::trent::unsafe_string_const()&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_str;&#13;
}&#13;
&#13;
nos::trent::list_type&nbsp;&amp;nos::trent::unsafe_list_const()&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_arr;&#13;
}&#13;
&#13;
nos::trent::dict_type&nbsp;&amp;nos::trent::unsafe_dict_const()&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_dct;&#13;
}&#13;
&#13;
const&nbsp;nos::trent::numer_type&nbsp;&amp;nos::trent::unsafe_numer_const()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_num;&#13;
}&#13;
&#13;
const&nbsp;nos::trent::string_type&nbsp;&amp;nos::trent::unsafe_string_const()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_str;&#13;
}&#13;
&#13;
const&nbsp;nos::trent::list_type&nbsp;&amp;nos::trent::unsafe_list_const()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_arr;&#13;
}&#13;
&#13;
const&nbsp;nos::trent::dict_type&nbsp;&amp;nos::trent::unsafe_dict_const()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_dct;&#13;
}&#13;
&#13;
const&nbsp;bool&nbsp;&amp;nos::trent::unsafe_bool_const()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_bool;&#13;
}&#13;
&#13;
nos::trent::type&nbsp;nos::trent::get_type()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_type;&#13;
}&#13;
&#13;
bool&nbsp;nos::trent::is_nil()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_type&nbsp;==&nbsp;type::nil;&#13;
}&#13;
&#13;
bool&nbsp;nos::trent::is_bool()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_type&nbsp;==&nbsp;type::boolean;&#13;
}&#13;
&#13;
bool&nbsp;nos::trent::is_numer()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_type&nbsp;==&nbsp;type::numer;&#13;
}&#13;
&#13;
bool&nbsp;nos::trent::is_list()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_type&nbsp;==&nbsp;type::list;&#13;
}&#13;
&#13;
bool&nbsp;nos::trent::is_dict()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_type&nbsp;==&nbsp;type::dict;&#13;
}&#13;
&#13;
bool&nbsp;nos::trent::is_string()&nbsp;const&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;m_type&nbsp;==&nbsp;type::string;&#13;
}&#13;
nos::trent&nbsp;&amp;nos::trent::operator=(const&nbsp;trent&nbsp;&amp;other)&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(this&nbsp;==&nbsp;&amp;other)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;*this;&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;invalidate();&#13;
&nbsp;&nbsp;&nbsp;&nbsp;m_type&nbsp;=&nbsp;other.m_type;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(m_type)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;type::string:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nos::constructor(&amp;m_str,&nbsp;other.m_str);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;*this;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;type::list:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nos::constructor(&amp;m_arr,&nbsp;other.m_arr);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;*this;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;type::dict:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nos::constructor(&amp;m_dct,&nbsp;other.m_dct);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;*this;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;type::numer:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_num&nbsp;=&nbsp;other.m_num;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;*this;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;type::boolean:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_bool&nbsp;=&nbsp;other.m_bool;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;*this;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;type::nil:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;*this;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;}&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;*this;&#13;
}&#13;
&#13;
nos::trent&nbsp;&amp;nos::trent::operator=(trent&nbsp;&amp;&amp;other)&nbsp;noexcept&#13;
{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(this&nbsp;==&nbsp;&amp;other)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;*this;&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;invalidate();&#13;
&nbsp;&nbsp;&nbsp;&nbsp;m_type&nbsp;=&nbsp;other.m_type;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;switch&nbsp;(m_type)&#13;
&nbsp;&nbsp;&nbsp;&nbsp;{&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;type::string:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nos::move_constructor(&amp;m_str,&nbsp;std::move(other.m_str));&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;*this;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;type::list:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nos::move_constructor(&amp;m_arr,&nbsp;std::move(other.m_arr));&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;*this;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;type::dict:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nos::move_constructor(&amp;m_dct,&nbsp;std::move(other.m_dct));&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;*this;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;type::numer:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_num&nbsp;=&nbsp;other.m_num;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;*this;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;type::boolean:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_bool&nbsp;=&nbsp;other.m_bool;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;*this;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;case&nbsp;type::nil:&#13;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;*this;&#13;
&nbsp;&nbsp;&nbsp;&nbsp;}&#13;
&#13;
&nbsp;&nbsp;&nbsp;&nbsp;other.reset(type::nil);&#13;
&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;*this;&#13;
}&#13;
<!-- END SCAT CODE -->
</body>
</html>
